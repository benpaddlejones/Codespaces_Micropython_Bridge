"""Type stubs for MicroPython asyncio (uasyncio) module."""
from typing import Any, Awaitable, Callable, Coroutine, Generator, Optional, TypeVar, Union

T = TypeVar("T")

class Task:
    """Async task."""
    def cancel(self) -> None: ...
    def __await__(self) -> Generator[Any, None, Any]: ...

class Event:
    """Event for task synchronization."""
    def __init__(self) -> None: ...
    def is_set(self) -> bool: ...
    def set(self) -> None: ...
    def clear(self) -> None: ...
    async def wait(self) -> bool: ...

class Lock:
    """Async lock."""
    def __init__(self) -> None: ...
    def locked(self) -> bool: ...
    async def acquire(self) -> bool: ...
    def release(self) -> None: ...
    async def __aenter__(self) -> "Lock": ...
    async def __aexit__(self, *args: Any) -> None: ...

class ThreadSafeFlag:
    """Thread-safe flag."""
    def __init__(self) -> None: ...
    def set(self) -> None: ...
    async def wait(self) -> None: ...

class StreamReader:
    """Async stream reader."""
    async def read(self, n: int = ...) -> bytes: ...
    async def readinto(self, buf: bytearray) -> int: ...
    async def readline(self) -> bytes: ...
    async def readexactly(self, n: int) -> bytes: ...

class StreamWriter:
    """Async stream writer."""
    def write(self, data: bytes) -> None: ...
    async def drain(self) -> None: ...
    def close(self) -> None: ...
    async def wait_closed(self) -> None: ...

class Server:
    """Async server."""
    async def wait_closed(self) -> None: ...
    def close(self) -> None: ...

def run(coro: Awaitable[T]) -> T:
    """Run a coroutine until complete."""
    ...

def create_task(coro: Coroutine[Any, Any, T]) -> Task:
    """Create and schedule a task."""
    ...

def current_task() -> Optional[Task]:
    """Return currently running task."""
    ...

async def sleep(t: float) -> None:
    """Sleep for t seconds."""
    ...

async def sleep_ms(t: int) -> None:
    """Sleep for t milliseconds."""
    ...

async def wait_for(aw: Awaitable[T], timeout: float) -> T:
    """Wait for awaitable with timeout."""
    ...

async def wait_for_ms(aw: Awaitable[T], timeout: int) -> T:
    """Wait for awaitable with timeout in milliseconds."""
    ...

async def gather(*aws: Awaitable[Any], return_exceptions: bool = ...) -> list[Any]:
    """Run awaitables concurrently."""
    ...

async def open_connection(
    host: str, port: int, ssl: Any = ...
) -> tuple[StreamReader, StreamWriter]:
    """Open network connection."""
    ...

async def start_server(
    callback: Callable[[StreamReader, StreamWriter], Coroutine[Any, Any, None]],
    host: str,
    port: int,
    backlog: int = ...,
    ssl: Any = ...,
) -> Server:
    """Start a TCP server."""
    ...

def get_event_loop() -> "Loop":
    """Get event loop."""
    ...

def new_event_loop() -> "Loop":
    """Create new event loop."""
    ...

class Loop:
    """Event loop."""
    def run_forever(self) -> None: ...
    def run_until_complete(self, coro: Awaitable[T]) -> T: ...
    def create_task(self, coro: Coroutine[Any, Any, T]) -> Task: ...
    def stop(self) -> None: ...
    def close(self) -> None: ...
    def set_exception_handler(self, handler: Callable[[Any, dict[str, Any]], None]) -> None: ...
